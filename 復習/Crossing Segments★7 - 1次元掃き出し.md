# Crossing Segments★7 - 1次元掃き出し

## 問題概要
- リンク: [提出コード](https://atcoder.jp/contests/typical90/submissions/73341057)
- 難易度: 水色
- タグ
  - fenwick木
  - sweep
  - 区間
- 所要時間
  - 読解: 1分
  - 方針: 2分 + 5分
  - 証明: なし
  - 実装: 10分
  - デバッグ: なし

## 第一印象
- 円の添え字処理が面倒だと思った (検討違いだったけど)
- 二次元を一次元に落として区間取得したいとすぐ思った
- 同じ頂点の辺のは含めてはいけないのが面倒だと思った

## 抽象化ログ
構造: 区間交差の判定

## 状態設計ログ
状態変数: 
- 追加済の辺
  - 有効な辺
  - 期限切れな辺
- 新規な辺

## 不変量ログ
- 保存量: 右端の分布
- 単調性: 左端 / 削除対象 / 交差判定可能域
- 対称性: なし?
- 独立性: 新規辺の数え上げる対象

## 方針確定プロセス
- 最終方針: fw木を二つ用いて「追加済の辺の右端の分布」と「有効切れの分布」を管理して逐次シミュレーション
- 採用理由: 順序不等式の処理方法をこれしか知らなかったから
- 棄却方針: なし

## 実装ログ
- edgesをちゃんと整順した。
- バッチ処理の必要なかったと振り返って思う

## WA/バグ分析
特になし (一発AC)

## 解説差分ログ
- 自力方針: 動的なイベントとして処理することで不都合な対称性を壊した
- [解説方針](https://atcoder.jp/contests/typical90/editorial/3213): 静的なイベントとして[便利なデータ構造](https://tech.preferred.jp/ja/blog/wavelettree_world/)を用いて攻略した
- 差分: 二次元処理の手法の知識差

## 再現性ログ
- 詰まり点: 
- 方針再現日程:

## 汎化ログ
順序不等式系は頻度を数え上げる方針が定石

## 感想
保存量とか言語化するのすごく難しく感じた。
直観の再現性を上げるのが今後重要になってくるかもしれない。

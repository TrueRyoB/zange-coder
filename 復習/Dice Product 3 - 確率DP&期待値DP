# Dice Product 3 - 確率DP&期待値DP

## 問題概要
- リンク: [提出](https://atcoder.jp/contests/abc300/submissions/73458164)
- 難易度:
- タグ
  - 確率DP
  - 疎探索
- 所要時間
  - 読解と方針: 10分
  - 証明: 3分
  - 実装: 10分
  - デバッグ: 10分

## 第一印象

式で始めに評価したのがよかった(=証明)。確率が1となる始めの状態をどうするかから検討したから、演算順序が矛盾なく定まった。

## 問題構造
- 構造: 貰う→配るの辺の向き逆転DAG
- 状態変数: 現在数値がiの時の到達確率
- 保存量: 各目が出る確からしさ (=1/6)
- 単調性: 現在数値の依存先
- 独立性: 始祖ノードから到達確率(=1)

## 方針確定プロセス
- 最終方針: 配るDP
- 採用理由: 貪欲を簡単に証明できたため
- 棄却方針: iに到達できる確率を保管 (状態数がO(N)になって間に合わない)

## 自力ACできなかったとき
- なぜ思いつかなかったか: 貢献度で疎だと気づけたらよかった。
- 思いつくためには何が必要か: 問題文をちゃんと読んで制約と照らし合わせる / MOD数値をコピペする

## 再現性ログ
- 解いた類題: [Sugoroku 3](https://atcoder.jp/contests/abc263/submissions/73597181)
- 方針再現日程: 未定　暫くはMOD入力したくない...

## 感想
意外と乗り越えたかもしれない。自己参照を避ける式変形はできるようになった。
---
愚直な配る方針が重複のため期待値の意味をはき違えた実装になることを理解した。全状態に到達する確率をそれぞれに対して求める > 各状態から次の遷移への期待値のかけ算でのやり方が、私の期待値DPの設計方針では向いているかもしれない。　方針再現日程のときは、貰うで重みを平均化させる手法にも挑戦するかもしれない。
---
結局、考察でいつも私がやらかすのは、集合論の勘違いが原因かもしれない。dp[i]が0~i番目までの部分集合の表現幅だなんて、言語化した試しもなかったし。次のアルゴリズムを学ぶときに、気を付けるべきポイントに登録する。
---
解説も記事も読んで、数日にわたってACしたのは自分でもとてもえらいと思った。

ver 2.0
